# ‚úÖ Danh s√°ch ch·ª©c nƒÉng Nh√¢n T∆∞·ªõng H·ªçc (Face Analysis Features)

## 1. Upload & Ph√¢n t√≠ch khu√¥n m·∫∑t (Face Analysis)

### Upload ·∫£nh:

- Upload ·∫£nh khu√¥n m·∫∑t (JPG/PNG, max 5MB)
- Validate file: ƒë·ªãnh d·∫°ng, k√≠ch th∆∞·ªõc, detect c√≥ khu√¥n m·∫∑t hay kh√¥ng
- Preview ·∫£nh tr∆∞·ªõc khi submit
- Crop/adjust ·∫£nh n·∫øu c·∫ßn (c√°i n√†y kh√≥ qu√° th√¨ b·ªè qua)

### ƒêi·ªÅn th√¥ng tin c√° nh√¢n:

- H·ªç v√† t√™n (b·∫Øt bu·ªôc)
- Gi·ªõi t√≠nh (Nam/N·ªØ - b·∫Øt bu·ªôc)
- Ng√†y sinh (ng√†y/th√°ng/nƒÉm - b·∫Øt bu·ªôc)
- Validation form ƒë·∫ßy ƒë·ªß

### X·ª≠ l√Ω ph√¢n t√≠ch:

- G·ª≠i ·∫£nh + th√¥ng tin l√™n server
- Nh·∫≠n k·∫øt qu·∫£ ph√¢n t√≠ch (realtime ho·∫∑c processing)
- Redirect ƒë·∫øn trang k·∫øt qu·∫£

## 2. Xem k·∫øt qu·∫£ ph√¢n t√≠ch (Analysis Results)

### Th√¥ng tin c∆° b·∫£n:

- Hi·ªÉn th·ªã ·∫£nh ƒë√£ upload
- Th√¥ng tin ng∆∞·ªùi d√πng: H·ªç t√™n, Gi·ªõi t√≠nh, Ng√†y sinh, Tu·ªïi
- Th√¥ng tin ng√†y l∆∞u ph√¢n t√≠ch

### C√°c tags ph√¢n t√≠ch:

- NƒÉm nay (Thi√™n can ƒê·ªãa chi)
- Th√°ng sinh
- Ng√†y sinh
- Ti·ªÅn ki·∫øp
- Thai m·∫´u
- Qu·∫ª
- Dung m√¥n (Ng≈© h√†nh)
- H·ª∑ th·∫ßn

### 12 ph·∫ßn ph√¢n t√≠ch chi ti·∫øt:

1. **Khu√¥n M·∫∑t** - T·ªïng quan v·ªÅ khu√¥n m·∫∑t
2. **Th∆∞·ª£ng ƒê√¨nh (Tr√°n)** - Ph√°i duy√™n tu·ªïi tr·∫ª (0-30)
3. **Trung ƒê√¨nh** - Ph√°i duy√™n trung ni√™n (31-50)
4. **H·∫° ƒê√¨nh** - Ph√°i duy√™n h·∫≠u v·∫≠n (51+)
5. **T√¢m ƒê√¨nh** - T·ªïng th·ªÉ 3 ƒë√¨nh
6. **·∫§n ƒê∆∞·ªùng** - Kh√≠ ch·∫•t, s·ª©c c·ªë
7. **M·∫Øt** - T√≠nh c√°ch, n·ªôi t√¢m
8. **L√¥ng M√†y** - Anh em, b·∫°n b√®, √Ω ch√≠
9. **M≈©i** - T√†i l·ªôc, s·ª± nghi·ªáp
10. **Nh√¢n Trung** - S·ª©c kh·ªèe, tu·ªïi th·ªç, con c√°i
11. **M√¥i** - T√†i ƒÉn n√≥i, giao ti·∫øp
12. **C·∫±m** - Ph√∫c h·∫≠u, b·ªÅn l√≤ng

- M·ªói ph·∫ßn hi·ªÉn th·ªã: Ti√™u ƒë·ªÅ + N·ªôi dung ph√¢n t√≠ch ƒë·∫ßy ƒë·ªß

## 3. Qu·∫£n l√Ω l·ªãch s·ª≠ ph√¢n t√≠ch (Analysis History)

### Danh s√°ch l·ªãch s·ª≠:

- Xem t·∫•t c·∫£ c√°c l·∫ßn ph√¢n t√≠ch tr∆∞·ªõc ƒë√≥
- M·ªói item hi·ªÉn th·ªã:
  - Thumbnail ·∫£nh
  - Ng√†y ph√¢n t√≠ch
  - N√∫t "Xem l·∫°i"

### L·ªçc v√† t√¨m ki·∫øm:

- S·∫Øp x·∫øp: M·ªõi nh·∫•t / C≈© nh·∫•t
- T√¨m ki·∫øm theo t√™n ho·∫∑c ng√†y

### Thao t√°c:

- Click ƒë·ªÉ xem l·∫°i k·∫øt qu·∫£
- X√≥a l·ªãch s·ª≠ (soft delete - c√≥ th·ªÉ kh√¥i ph·ª•c trong 30 ng√†y)
- ƒê·ªïi ·∫£nh m·ªõi (gi·ªØ nguy√™n th√¥ng tin c√° nh√¢n)

## 4. ƒê·ªïi ·∫£nh lu·∫≠n gi·∫£i (Re-upload)

- T·ª´ trang k·∫øt qu·∫£, click "ƒê·ªïi ·∫£nh lu·∫≠n gi·∫£i"
- Quay l·∫°i form upload (gi·ªØ nguy√™n ho·∫∑c x√≥a th√¥ng tin c≈©)
- Upload ·∫£nh m·ªõi v√† ph√¢n t√≠ch l·∫°i
- T·∫°o record m·ªõi trong l·ªãch s·ª≠

## 5. Chia s·∫ª k·∫øt qu·∫£ (Share Results)

### Chia s·∫ª qua:

- Link (generate unique URL)
- Facebook
- Zalo
- Copy link

### Quy·ªÅn ri√™ng t∆∞:

- C√¥ng khai: Ai c√≥ link ƒë·ªÅu xem ƒë∆∞·ª£c
- Ri√™ng t∆∞: Ch·ªâ ch·ªß s·ªü h·ªØu xem ƒë∆∞·ª£c

---

# ‚úÖ Ch·ª©c nƒÉng Admin (Admin Features)

## 6. Qu·∫£n l√Ω ph√¢n t√≠ch (Analysis Management)

### Dashboard t·ªïng quan:

- T·ªïng s·ªë l∆∞·ª£t ph√¢n t√≠ch
- S·ªë l∆∞·ª£t ph√¢n t√≠ch h√¥m nay

### Qu·∫£n l√Ω danh s√°ch:

- Xem t·∫•t c·∫£ ph√¢n t√≠ch c·ªßa users
- L·ªçc theo: User, Ng√†y
- Xem chi ti·∫øt t·ª´ng ph√¢n t√≠ch
- X√≥a ph√¢n t√≠ch vi ph·∫°m

## 7. Qu·∫£n l√Ω n·ªôi dung (Content Management)

### Template lu·∫≠n gi·∫£i:

- Qu·∫£n l√Ω n·ªôi dung template cho 12 ph·∫ßn
- Bi·∫øn ƒë·ªông n·ªôi dung d·ª±a tr√™n Ng≈© h√†nh, Qu·∫ª, v.v.
- CRUD template

### Features Management:

- Qu·∫£n l√Ω 3 t√≠nh nƒÉng ch√≠nh tr√™n trang ch·ªß
- Ch·ªânh s·ª≠a icon, ti√™u ƒë·ªÅ, m√¥ t·∫£

## 8. Qu·∫£n l√Ω ng∆∞·ªùi d√πng (User Management)

### Danh s√°ch users:

- Th√¥ng tin c∆° b·∫£n
- S·ªë l·∫ßn ph√¢n t√≠ch
- Ng√†y ƒëƒÉng k√Ω

### Thao t√°c:

- Xem l·ªãch s·ª≠ ph√¢n t√≠ch c·ªßa user
- C·∫£nh c√°o/Ban user
- Reset password
- G·ª≠i th√¥ng b√°o

## 9. B√°o c√°o & Th·ªëng k√™ (Reports & Analytics)

### Th·ªëng k√™ s·ª≠ d·ª•ng:

- L∆∞·ª£t truy c·∫≠p trang Nh√¢n T∆∞·ªõng
- L∆∞·ª£t upload ·∫£nh
- Bounce rate
- Time on page

### Th·ªëng k√™ AI/ML:

- ƒê·ªô ch√≠nh x√°c face detection
- Th·ªùi gian x·ª≠ l√Ω trung b√¨nh
- T·ª∑ l·ªá l·ªói ph√¢n t√≠ch

### User behavior:

- T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi t·ª´ng b∆∞·ªõc (funnel)
- Th·ªùi ƒëi·ªÉm upload nhi·ªÅu nh·∫•t
- ƒê·ªô tu·ªïi ng∆∞·ªùi d√πng ph√¢n t√≠ch
- Gi·ªõi t√≠nh ng∆∞·ªùi d√πng

---

# üéØ API Endpoints c·∫ßn Backend l√†m


## Face Analysis APIs

### 1. Upload & Ph√¢n t√≠ch

```
POST   /api/analysis/upload
       Headers: Authorization: Bearer {token}
       Content-Type: multipart/form-data
       Body: {
         image: File,
         fullName: String,
         gender: "male" | "female",
         birthDate: {
           day: Number (1-31),
           month: Number (1-12),
           year: Number (YYYY)
         }
       }
       Response: {
         success: true,
         analysisId: String,
         status: "processing" | "completed",
         message: "ƒêang ph√¢n t√≠ch..."
       }
```

### 2. L·∫•y k·∫øt qu·∫£ ph√¢n t√≠ch

```
GET    /api/analysis/:id
       Headers: Authorization: Bearer {token}
       Response: {
         id: String,
         userId: String,
         userInfo: {
           fullName: String,
           gender: "male" | "female",
           birthDate: String (DD-MM-YYYY),
           age: Number
         },
         imageUrl: String,
         tags: {
           year: String,          // "Gi√°p Th√¢n"
           month: String,         // "Nh√¢m Th√¢n"
           day: String,           // "ƒêinh S·ª≠u"
           prevLife: String,      // "Tuy·ªÉn Trung Th·ªßy"
           pregnancy: String,     // "Th·∫ßn Thi√™n Ph√°p"
           trigram: String,       // "C√†n Tr·ª±c ƒê·ªôc"
           element: String,       // "M·ªôc"
           deity: String          // "H·ªèa"
         },
         sections: [
           {
             num: "01",
             title: "Khu√¥n M·∫∑t",
             content: String,          // N·ªôi dung ph√¢n t√≠ch ƒë·∫ßy ƒë·ªß
             parametersCount: Number   // S·ªë th√¥ng s·ªë
           },
           // ... 11 sections n·ªØa
         ],
         shareLink: String,
         shareSettings: "public" | "private",
         createdAt: Date,
         updatedAt: Date
       }
```

### 3. L·∫•y l·ªãch s·ª≠ ph√¢n t√≠ch

```
GET    /api/analysis/history
       Headers: Authorization: Bearer {token}
       Query: {
         page: Number (default: 1),
         limit: Number (default: 10),
         sortBy: "newest" | "oldest"
       }
       Response: {
         total: Number,
         page: Number,
         limit: Number,
         data: [
           {
             id: String,
             thumbnail: String,
             userInfo: { fullName, age, gender },
             createdAt: Date
           }
         ]
       }
```

### 4. X√≥a ph√¢n t√≠ch

```
DELETE /api/analysis/:id
       Headers: Authorization: Bearer {token}
       Response: {
         success: true,
         message: "ƒê√£ x√≥a ph√¢n t√≠ch. C√≥ th·ªÉ kh√¥i ph·ª•c trong 30 ng√†y."
       }
```

### 5. Kh√¥i ph·ª•c ph√¢n t√≠ch ƒë√£ x√≥a

```
POST   /api/analysis/:id/restore
       Headers: Authorization: Bearer {token}
       Response: {
         success: true,
         message: "ƒê√£ kh√¥i ph·ª•c ph√¢n t√≠ch"
       }
```

### 6. C·∫≠p nh·∫≠t chia s·∫ª

```
PUT    /api/analysis/:id/share
       Body: {
         shareSettings: "public" | "private" | "preview"
       }
       Response: {
         shareLink: String,
         shareSettings: String
       }
```

### 7. Xem ph√¢n t√≠ch qua share link (Public) 

#### N·∫øu kh√¥ng l√†m ch·ª©c nƒÉng share k·∫øt qu·∫£ th√¨ b·ªè qua api n√†y

```
GET    /api/analysis/shared/:shareToken
       No Auth Required
       Response: {
         // Gi·ªëng GET /api/analysis/:id
         // Nh∆∞ng ch·ªâ tr·∫£ v·ªÅ data theo shareSettings
       }
```

---


## Admin APIs

### 1. Dashboard th·ªëng k√™

```
GET    /api/admin/stats/overview
       Headers: Authorization: Bearer {adminToken}
       Response: {
         totalAnalyses: Number,
         todayAnalyses: Number,
         activeUsers: Number,
         avgProcessingTime: Number  // seconds
       }
```

### 2. Qu·∫£n l√Ω ph√¢n t√≠ch

```
GET    /api/admin/analyses
       Query: {
         page, limit,
         userId: String (optional),
         startDate, endDate
       }

DELETE /api/admin/analyses/:id
       Body: { reason: String }
```

### 3. Qu·∫£n l√Ω ng∆∞·ªùi d√πng

```
GET    /api/admin/users
       Query: { page, limit, search, sortBy }

GET    /api/admin/users/:id
       Response: {
         // User info + statistics
         totalAnalyses: Number,
         lastActivity: Date
       }

PUT    /api/admin/users/:id/status
       Body: { status: "active" | "banned", reason: String }
```

### 4. Qu·∫£n l√Ω n·ªôi dung

```
POST   /api/admin/content/faq
       Body: { question, answer, order }

PUT    /api/admin/content/faq/:id
DELETE /api/admin/content/faq/:id

POST   /api/admin/content/features
PUT    /api/admin/content/features/:id
DELETE /api/admin/content/features/:id
```

### 5. Th·ªëng k√™ chi ti·∫øt

```
GET    /api/admin/stats/users
       Response: {
         totalUsers: Number,
         newUsersToday: Number,
         activeUsers: Number
       }

GET    /api/admin/stats/user-behavior
       Response: {
         visitLandingPage: Number,
         uploadImage: Number,
         viewResults: Number,
         rates: {
           uploadRate: Number,
           completionRate: Number
         }
       }
```

---
